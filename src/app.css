@import 'tailwindcss';
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');

@theme {
	/* Light mode colors (default) */
	--color-background: hsl(0 0% 100%);
	--color-foreground: hsl(240 10% 3.9%);
	--color-card: hsl(0 0% 100%);
	--color-card-foreground: hsl(240 10% 3.9%);
	--color-popover: hsl(0 0% 100%);
	--color-popover-foreground: hsl(240 10% 3.9%);
	--color-primary: hsl(221.2 83.2% 53.3%);
	--color-primary-foreground: hsl(210 40% 98%);
	--color-secondary: hsl(240 4.8% 95.9%);
	--color-secondary-foreground: hsl(240 5.9% 10%);
	--color-muted: hsl(240 4.8% 95.9%);
	--color-muted-foreground: hsl(240 3.8% 46.1%);
	--color-accent: hsl(240 4.8% 95.9%);
	--color-accent-foreground: hsl(240 5.9% 10%);
	--color-destructive: hsl(0 84.2% 60.2%);
	--color-destructive-foreground: hsl(0 0% 98%);
	--color-border: hsl(240 5.9% 90%);
	--color-input: hsl(240 5.9% 90%);
	--color-ring: hsl(221.2 83.2% 53.3%);

	--radius: 0.5rem;
}

/* Dark mode color overrides */
@media (prefers-color-scheme: dark) {
	:root {
		--color-background: hsl(240 10% 3.9%);
		--color-foreground: hsl(0 0% 98%);
		--color-card: hsl(240 10% 3.9%);
		--color-card-foreground: hsl(0 0% 98%);
		--color-popover: hsl(240 10% 3.9%);
		--color-popover-foreground: hsl(0 0% 98%);
		--color-primary: hsl(217.2 91.2% 59.8%);
		--color-primary-foreground: hsl(222.2 47.4% 11.2%);
		--color-secondary: hsl(240 3.7% 15.9%);
		--color-secondary-foreground: hsl(0 0% 98%);
		--color-muted: hsl(240 3.7% 15.9%);
		--color-muted-foreground: hsl(240 5% 64.9%);
		--color-accent: hsl(240 3.7% 15.9%);
		--color-accent-foreground: hsl(0 0% 98%);
		--color-destructive: hsl(0 62.8% 30.6%);
		--color-destructive-foreground: hsl(0 0% 98%);
		--color-border: hsl(240 3.7% 15.9%);
		--color-input: hsl(240 3.7% 15.9%);
		--color-ring: hsl(217.2 91.2% 59.8%);
	}
}

* {
	border-color: var(--color-border);
}

body {
	/* background-color: var(--color-background); removed in favor of new design */
	/* color: var(--color-foreground); removed in favor of new design */
	font-feature-settings:
		'rlig' 1,
		'calt' 1;
}

/* --- NEW DESIGN SYSTEM --- */

:root {
	/* Backgrounds */
	--bg-page: #020617; /* deep navy, not full black */
	--bg-elevated: #050816; /* cards, article surfaces */
	--bg-soft: #0b1120; /* hero, subtle panels */

	/* Borders & lines */
	--border-subtle: rgba(148, 163, 184, 0.35);
	--border-soft: rgba(15, 23, 42, 0.9);

	/* Text */
	--text-main: #e5e7eb; /* almost-white */
	--text-muted: #9ca3af;
	--text-subtle: #6b7280;

	/* Accent (brand color) */
	--accent: #38bdf8; /* cyan */
	--accent-soft: rgba(56, 189, 248, 0.16);
	--accent-strong: #0ea5e9;

	/* Code & tags */
	--code-bg: #020617;
	--code-border: rgba(148, 163, 184, 0.4);
	--tag-bg: rgba(15, 23, 42, 0.9);

	/* Shadows */
	--shadow-soft: 0 22px 45px rgba(0, 0, 0, 0.78);
	--accent-rgb: 56, 189, 248; /* RGB values for --accent #38bdf8 */
}

@keyframes shimmer {
	0% {
		background-position: 200% 0;
	}
	100% {
		background-position: -200% 0;
	}
}

.animate-shimmer {
	background: linear-gradient(
		90deg,
		var(--bg-elevated) 0%,
		rgba(56, 189, 248, 0.1) 50%,
		var(--bg-elevated) 100%
	);
	background-size: 200% 100%;
	animation: shimmer 2s infinite linear;
}

/* Base page styles */
*,
*::before,
*::after {
	box-sizing: border-box;
}

html,
body {
	margin: 0;
	padding: 0;
}

body {
	min-height: 100vh;
	background: radial-gradient(circle at 18% 12%, #0b1a3d 0, #020617 44%, #020617 100%);
	color: var(--text-main);
	font-family:
		'Plus Jakarta Sans',
		'Inter',
		-apple-system,
		BlinkMacSystemFont,
		'Segoe UI',
		system-ui,
		sans-serif;
	-webkit-font-smoothing: antialiased;
}

/* Texture */
body::before {
	content: '';
	position: fixed;
	inset: 0;
	pointer-events: none;
	opacity: 0.14;
	mix-blend-mode: soft-light;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80' width='80' height='80'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='80' height='80' filter='url(%23n)' opacity='0.35'/%3E%3C/svg%3E");
}

body::after {
	content: '';
	position: fixed;
	inset: 0;
	pointer-events: none;
	background-image:
		linear-gradient(90deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px),
		linear-gradient(0deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px);
	background-size:
		140px 140px,
		140px 140px;
	opacity: 0.18;
	mask-image:
		radial-gradient(circle at 18% 18%, rgba(255, 255, 255, 0.5), transparent 45%),
		radial-gradient(circle at 75% 12%, rgba(255, 255, 255, 0.5), transparent 42%),
		radial-gradient(circle at 50% 80%, rgba(255, 255, 255, 0.35), transparent 48%);
	mask-composite: exclude;
}

::selection {
	background: var(--accent-soft);
	color: var(--accent-strong);
}

/* Enhanced Focus Indicators for Accessibility */
*:focus {
	outline: none;
}

*:focus-visible {
	outline: 2px solid var(--accent);
	outline-offset: 3px;
	border-radius: 0.25rem;
	transition: outline-offset 150ms ease;
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
	outline: 2px solid var(--accent);
	outline-offset: 3px;
	box-shadow: 0 0 0 4px rgba(var(--accent-rgb), 0.15);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* Layout containers */
.site {
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.site-main {
	flex: 1;
	max-width: 1200px;
	margin: 0 auto;
	padding: 2.5rem 1.5rem 3.5rem;
	width: 100%; /* Ensure it takes width */
}

.site-footer {
	border-top: 1px solid var(--border-soft);
	padding: 1rem 1.5rem 1.5rem;
	font-size: 0.8rem;
	color: var(--text-subtle);
	text-align: center;
}

/* Header */
.site-header {
	border-bottom: 1px solid var(--border-soft);
	background: linear-gradient(to bottom, #020617ee, #02061700);
	backdrop-filter: blur(10px);
	position: sticky;
	top: 0;
	z-index: 50;
}

.site-header-inner {
	max-width: 1200px;
	margin: 0 auto;
	padding: 0.9rem 1.5rem;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.site-title {
	font-weight: 600;
	letter-spacing: 0.12em;
	text-transform: uppercase;
	font-size: 0.85rem;
	color: var(--text-muted);
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
	letter-spacing: 0.18em;
}

.site-nav a {
	font-size: 0.9rem;
	color: var(--text-muted);
	text-decoration: none;
	margin-left: 1.5rem;
	position: relative;
	padding-bottom: 0.25rem;
}

.site-nav a:hover {
	color: var(--accent);
}

.site-nav a::after {
	content: '';
	position: absolute;
	left: 0;
	bottom: -0.15rem;
	height: 2px;
	width: 100%;
	background: linear-gradient(90deg, var(--accent-strong), var(--accent));
	transform: scaleX(0);
	transform-origin: left;
	transition: transform 180ms ease;
}

.site-nav a:hover::after,
.site-nav a:focus-visible::after {
	transform: scaleX(1);
}

/* Hero Block */
.hero {
	background: radial-gradient(circle at top left, #0f172a, #020617);
	border-radius: 1rem;
	border: 1px solid var(--border-subtle);
	padding: 1.75rem 1.75rem 1.5rem;
	margin: 2.25rem 0 1.75rem;
	box-shadow: var(--shadow-soft);
	position: relative;
	overflow: hidden;
}

.hero::before {
	content: '';
	position: absolute;
	inset: 0;
	background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.25), transparent 55%);
	opacity: 0.5;
	pointer-events: none;
}

.hero-title {
	position: relative;
	font-size: 1.8rem;
	font-weight: 700;
	margin-bottom: 0.25rem;
	color: var(--text-main);
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
}

.hero-subtitle {
	position: relative;
	font-size: 0.95rem;
	color: var(--text-muted);
	max-width: 34rem;
	margin-bottom: 1.25rem;
}

.hero-actions {
	position: relative;
	display: flex;
	flex-wrap: wrap;
	gap: 0.75rem;
}

.button-primary,
.button-ghost {
	font-size: 0.9rem;
	padding: 0.55rem 1.1rem;
	border-radius: 999px;
	border: 1px solid transparent;
	cursor: pointer;
	background: none;
	color: inherit;
	text-decoration: none;
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	position: relative;
	overflow: hidden;
}

.button-primary {
	background: linear-gradient(to right, var(--accent-strong), var(--accent));
	color: #0f172a;
	font-weight: 500;
	box-shadow: 0 10px 28px rgba(var(--accent-rgb), 0.22);
}

.button-primary:hover {
	filter: brightness(1.05);
	box-shadow: 0 12px 34px rgba(var(--accent-rgb), 0.3);
}

.button-primary::after {
	content: '';
	position: absolute;
	inset: -10%;
	background: linear-gradient(
		120deg,
		transparent 20%,
		rgba(255, 255, 255, 0.35) 50%,
		transparent 80%
	);
	transform: translateX(-120%);
	transition: transform 240ms ease;
}

.button-primary:hover::after {
	transform: translateX(120%);
}

.button-ghost {
	border-color: var(--border-subtle);
	color: var(--text-muted);
	background: rgba(15, 23, 42, 0.7);
}

.button-ghost:hover {
	border-color: var(--accent);
	color: var(--accent);
}

.posts-heading {
	margin: 2rem 0 1rem;
	font-size: 1rem;
	text-transform: uppercase;
	letter-spacing: 0.14em;
	color: var(--text-subtle);
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
}

/* Post Card */
.post-card {
	background: var(--bg-elevated);
	border-radius: 0.9rem;
	border: 1px solid var(--border-subtle);
	padding: 1.2rem 1.4rem;
	margin-bottom: 1rem;
	position: relative;
	isolation: isolate;
	transition:
		transform 150ms ease,
		box-shadow 150ms ease,
		border-color 150ms ease,
		background 150ms ease;
	display: block; /* Ensure it behaves like a block */
	text-decoration: none; /* If using <a> wrapper, though prompt used div */
}

.post-card::before {
	content: '';
	position: absolute;
	inset: 1px;
	border-radius: inherit;
	background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
	opacity: 0.6;
	z-index: -1;
}

.post-card::after {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	border: 1px solid transparent;
	background: linear-gradient(120deg, rgba(var(--accent-rgb), 0.2), rgba(255, 255, 255, 0))
		border-box;
	mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	-webkit-mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	mask-composite: exclude;
	-webkit-mask-composite: xor;
	opacity: 0;
	transition: opacity 180ms ease;
}

.post-card:hover {
	transform: translateY(-2px);
	box-shadow: var(--shadow-soft);
	border-color: rgba(148, 163, 184, 0.8);
	background: #050b1a;
}

.post-card:hover::after {
	opacity: 1;
}

.post-meta {
	font-size: 0.75rem;
	text-transform: uppercase;
	letter-spacing: 0.12em;
	color: var(--text-subtle);
	margin-bottom: 0.3rem;
}

.post-title {
	font-size: 1.1rem;
	margin: 0 0 0.25rem;
	color: var(--text-main);
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
}

.post-title a {
	color: var(--text-main);
	text-decoration: none;
}

.post-title a:hover {
	color: var(--accent);
}

.post-excerpt {
	font-size: 0.9rem;
	color: var(--text-muted);
	margin: 0.2rem 0 0;
}

/* Article Page */
.article-wrap {
	max-width: 960px;
	margin: 2.5rem auto 3.5rem;
	padding: 0 1.5rem;
}

.article-back {
	font-size: 0.85rem;
	color: var(--text-subtle);
	text-decoration: none;
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	margin-bottom: 1rem;
}

.article-back:hover {
	color: var(--accent);
}

.article-meta {
	font-size: 0.8rem;
	color: var(--text-muted);
	margin-bottom: 0.4rem;
}

.article-title {
	font-size: 1.7rem;
	margin: 0 0 0.4rem;
	color: var(--text-main);
	line-height: 1.3;
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
}

.article-tags {
	display: flex;
	flex-wrap: wrap;
	gap: 0.4rem;
	margin: 0.6rem 0 1.4rem;
}

.tag {
	font-size: 0.75rem;
	padding: 0.2rem 0.6rem;
	border-radius: 999px;
	background: var(--tag-bg);
	border: 1px solid rgba(148, 163, 184, 0.4);
	color: var(--text-muted);
}

.article-body {
	background: var(--bg-elevated);
	border-radius: 0.9rem;
	border: 1px solid var(--border-subtle);
	padding: 1.75rem 1.6rem;
	box-shadow: var(--shadow-soft);
	font-size: 0.98rem;
	line-height: 1.7;
	color: var(--text-main);
	position: relative;
	overflow: hidden;
}

.article-body::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	pointer-events: none;
	background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.14), rgba(255, 255, 255, 0));
	opacity: 0.55;
	mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	-webkit-mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	mask-composite: exclude;
	-webkit-mask-composite: xor;
}

/* Markdown Content Styling */
.article-body a {
	color: var(--accent);
	text-decoration: underline;
	text-decoration-thickness: 1px;
	text-underline-offset: 2px;
}

.article-body a:hover {
	color: var(--accent-strong);
}

.article-body h1,
.article-body h2,
.article-body h3 {
	margin-top: 1.4rem;
	margin-bottom: 0.5rem;
	color: var(--text-main);
	font-family: 'Space Grotesk', 'Plus Jakarta Sans', system-ui, sans-serif;
}

.article-body h1 {
	font-size: 1.4rem;
}
.article-body h2 {
	font-size: 1.25rem;
}
.article-body h3 {
	font-size: 1.1rem;
}

.article-body p {
	margin: 0.55rem 0;
}

.article-body pre {
	background: var(--code-bg);
	border-radius: 0.6rem;
	border: 1px solid var(--code-border);
	padding: 0.9rem 1rem;
	overflow-x: auto;
	font-size: 0.85rem;
	margin: 0.85rem 0;
}

.article-body code {
	font-family:
		ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
		monospace;
	font-size: 0.85em;
	color: var(--accent); /* Optional, matching the code style */
	background: rgba(255, 255, 255, 0.03);
	padding: 0.15rem 0.35rem;
	border-radius: 0.4rem;
	border: 1px solid rgba(148, 163, 184, 0.25);
}

.article-body blockquote {
	margin: 0.95rem 0;
	padding-left: 1rem;
	border-left: 3px solid var(--accent);
	color: var(--text-muted);
	font-style: italic;
}

/* Table of contents chrome */
.toc-sidebar {
	background: rgba(15, 23, 42, 0.65);
	border: 1px solid rgba(148, 163, 184, 0.35);
	border-left: 3px solid var(--accent);
	border-radius: 0.85rem;
	padding: 1rem 1rem 1rem 1.25rem;
	backdrop-filter: blur(10px);
	box-shadow: 0 18px 42px rgba(0, 0, 0, 0.45);
}

.toc-sidebar nav a {
	position: relative;
	color: var(--text-muted);
	padding: 0.2rem 0.1rem 0.2rem 0.6rem;
	border-radius: 0.4rem;
	transition:
		color 160ms ease,
		background 160ms ease;
}

.toc-sidebar nav a::before {
	content: '';
	position: absolute;
	left: 0;
	top: 50%;
	width: 6px;
	height: 6px;
	border-radius: 999px;
	background: rgba(148, 163, 184, 0.6);
	transform: translate(-9px, -50%);
	transition:
		background 160ms ease,
		transform 160ms ease,
		opacity 160ms ease;
	opacity: 0.8;
}

.toc-sidebar nav a:hover {
	color: var(--accent);
	background: rgba(var(--accent-rgb), 0.08);
}

.toc-sidebar nav a:hover::before {
	background: var(--accent);
	transform: translate(-9px, -50%) scale(1.2);
}

.toc-sidebar nav a.text-accent {
	color: var(--accent);
	background: rgba(var(--accent-rgb), 0.08);
}

.toc-sidebar nav a.text-accent::before {
	background: var(--accent);
	transform: translate(-9px, -50%) scale(1.35);
}

/* Progress bar highlight */
[data-slot='progress'] {
	background: rgba(var(--accent-rgb), 0.12);
	border-bottom: 1px solid rgba(var(--accent-rgb), 0.25);
}

[data-slot='progress-indicator'] {
	background: linear-gradient(90deg, var(--accent-strong), var(--accent));
	box-shadow: 0 0 22px rgba(var(--accent-rgb), 0.35);
}

/* Shared accent edge for admin surfaces */
:is(.action-card, .card, .add-form, .table-container, .login-card) {
	position: relative;
	isolation: isolate;
	overflow: hidden;
}

:is(.action-card, .card, .add-form, .table-container, .login-card)::before {
	content: '';
	position: absolute;
	inset: 1px;
	border-radius: inherit;
	background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0));
	pointer-events: none;
	z-index: -1;
}

:is(.action-card, .card, .add-form, .table-container, .login-card)::after {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	border: 1px solid transparent;
	background: linear-gradient(120deg, rgba(var(--accent-rgb), 0.25), rgba(255, 255, 255, 0))
		border-box;
	mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	-webkit-mask:
		linear-gradient(#000, #000) padding-box,
		linear-gradient(#000, #000);
	mask-composite: exclude;
	-webkit-mask-composite: xor;
	opacity: 0;
	transition: opacity 180ms ease;
	pointer-events: none;
}

:is(.action-card, .card, .add-form, .table-container, .login-card):hover::after {
	opacity: 1;
}
